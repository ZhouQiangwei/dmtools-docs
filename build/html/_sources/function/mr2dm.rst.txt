dmtools mr2dm
=============

.. contents:: 
    :local:

Description
^^^^^^^^^^

Convert methratio txt file to dm binary file

Not all software that calculates DNA methylation levels output files in the same format. Currently common formats include BatMeth2, Bsmap, BS-Seeker2, Bismark2, etc.
Before performing downstream calculations, analysis, and visualization with DMtools, 
some formatting conversion work needs to be done. Different software formats need to be converted 
to the DM format, and the currently supported format conversions include methratio, 
bedmethyl, bismark, bedsimple, etc. 
For more details, please refer to the `Parameters`_ instructions.

The `mr2dm` command is used to format DNA methylation result files.

Usage
^^^^^

.. code:: bash

    $ dmtools mr2dm -g genome.fa.size -m mutant.methratio.txt --outdm mutant.methratio.dm


Parameters
^^^^^^^^^^

*mode paramaters, required*

``-g`` chromosome size file, can be generated by ``samtools faidx genome.fa``.

``-m`` methratio file

``-o|--outdm`` output DM file

*mode paramaters, options*

``-C`` print coverage

``-S`` print strand

``--Cx`` print context

``-E`` print end

``--Id`` print ID

``--CF`` coverage filter, >=[int], default 4.

``--sort`` Y/N make chromsize file and meth file in same coordinate, default Y

``--zl`` The maximum number of zoom levels. [0-10]

``-f`` file format. methratio, bedmethyl, bismark or bedsimple [default methratio]

    ``methratio`` chrom start strand context meth_reads cover

    ``bedmethyl`` chrom start end name * strand * * * coverage meth_reads

    ``bismark`` chrom start strand coverC coverT context

    ``bedsimple`` chrom start end id strand context meth_reads coverage

``--pcontext`` CG/CHG/CHH/C, needed when bedmethyl format, default C

``--fcontext`` CG/CHG/CHH/ALL, only convert provide context in methratio file or bedsimple, default ALL

``--sv`` add strand information to make meth level as positive and negative value. eg 0.5, -0.5

``Note.`` meth ratio file must be sorted by chrom and coordinate. ex. sort -k1,1 -k2,2n

``-h|--help``


Output files
^^^^^^^^^^

.. code:: bash

    1. prefix.methratio.dm (binary file with index, view and processed with dmtools)

Output file format
^^^^^^^^^^

.. code:: bash

    1. methratio.dm (binary file, view and processed with dmtools)
        Chromosome Loci (end) methlevel CT_count Strand Context
        # ex. dmtools view -i test.mr.dm -r Chr1:61-61
        # ex. Chr1    61      0.286364  11  +       CHH
        # CT_count     The number of coverage in this base pair.
        # BigWig for genome browser, suggest with end col.


obtained dm format methylation results, you can see more details with 'dmtools mr2dm -h'


.. tip:: For feature requests or bug reports please open an issue `on github <http://github.com/ZhouQiangwei/dmtools>`__.
